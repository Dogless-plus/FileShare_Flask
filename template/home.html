<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dogless-File</title>
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
</head>
<body>
<h1>Dogless Share File</h1>
<hr style="height:5px;border:none;border-top:5px ridge green;" />
<form  method="POST" enctype="multipart/form-data">
    <input type="file" id="file" name="file" value="Choose File">
    <input type="submit" value="UPLOAD" href="/?<?=Date('U')?>">
</form>
<div class="progress" style="display: none;">
    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
        0%
    </div>
</div>
<script type="text/javascript">
    $('form').on('submit', function (event) {
        $('.progress').css('display', 'block');
        event.preventDefault();
        var formData = new FormData(this);
        $.ajax({
            xhr: function () {
                var xhr = new XMLHttpRequest();
                xhr.upload.addEventListener('progress', function (e) {
                    if (e.lengthComputable) {
                        var percent = Math.round(e.loaded * 100 / e.total);
                        $('.progress-bar').attr('aria-valuenow', percent).css('width', percent + '%').text(percent + '%');
                    }
                });
                return xhr;
            },
            type: 'POST',
            url:"/upload",
            cache: false,
            data: formData,
            processData: false,
            contentType: false
        }).done(function (res) {
            alert('Success!');
            window.location.reload();
        }).fail(function (res) {
            alert('Fail!');
        });
    });
</script>
<hr>
<button><a href="/delete_all?<?=Date('U')?>"> DELETE ALL FILES</a></button>
<hr>
<h3>TOTAL FILES:{{nfile}}</h3>

{{filenames}}
<hr>
{{filetimes}}


<table class="table table-striped table-hover">
    <colgroup>
    <col/>
    <col/>
    <col width='10%'/>
    <col/>
  </colgroup>
    <thead>
    <tr>
        <th>FileName</th>
        <th>TimeStamp</th>
        <th>Option</th>
    </tr>
    </thead>

    <tbody>
    <tr>
        <td>001</td>
        <td>Rammohan </td>
    </tr>
    <tr>
        <td>002</td>
        <td>Smita</td>
    </tr>
    <tr>
        <td>003</td>
        <td>A+</td>
    </tr>
    </tbody>
</table>


</body>
</html>

